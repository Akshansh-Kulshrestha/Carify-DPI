{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard</title>

  <link rel="icon" href="{% static 'images/favicon.png' %}" type="image/x-icon" />
  <link rel="shortcut icon" href="{% static 'images/favicon.png' %}" type="image/x-icon" />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com/" />
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet" />

  <!-- CSS Files -->
  <link rel="stylesheet" href="{% static 'assests/css/vendors/bootstrap.css' %}" />
  <link rel="stylesheet" href="{% static 'assests/css/fontawesome-min.css' %}" />
  <link rel="stylesheet" href="{% static 'assests/css/themify.css' %}" />
  <link rel="stylesheet" href="{% static 'assests/css/vendors/slick.css' %}" />
  <link rel="stylesheet" href="{% static 'assests/css/vendors/slick-theme.css' %}" />
  <link rel="stylesheet" href="{% static 'assests/css/vendors/animate.css' %}" />
  <link rel="stylesheet" href="{% static 'assests/css/bulk-style.css' %}" />
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />

  <!-- JS Scripts in Head -->
  <script src="https://kit.fontawesome.com/99a870abbd.js" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Custom Layout Styles -->
  <style>
    body {
      display: flex;
      flex-direction: row;
      min-height: 100vh;
      font-family: 'Nunito Sans', sans-serif;
    }

    .page-sidebar {
      width: 250px;
      background-color: #ffffff;
      border-right: 1px solid #ddd;
      padding: 20px 0;
      min-height: 100vh;
      position: relative;
    }

    .page-body {
      flex-grow: 1;
      padding: 20px;
      background-color: #f8f9fa;
    }

    .sidebar-menu {
      list-style: none;
      padding-left: 0;
      margin: 0;
    }

    .sidebar-list {
      padding: 10px 20px;
    }

    .sidebar-link {
      display: flex;
      align-items: center;
      text-decoration: none;
      color: #333;
    }

    .sidebar-link i {
      margin-right: 10px;
    }

    .sidebar-link:hover {
      background-color: #f0f0f0;
      border-radius: 5px;
    }

    .navbar-brand img {
      max-width: 140px;
    }

    .summary-card h6 {
      font-size: 14px;
    }

    @media (max-width: 576px) {
      .summary-card h6 {
        font-size: 12px;
      }
      .navbar-brand img {
        max-width: 100px;
      }
      .landing-header h2 {
        font-size: 16px !important;
      }
      .btn {
        font-size: 12px !important;
        padding: 5px 10px !important;
      }

      .page-sidebar {
        display: none; /* Hide sidebar on small screens */
      }
    }
  </style>
</head>

<body>
  <!-- Sidebar -->
  
  <!-- Main Page Content -->
  <div class="page-body">
    <!-- Header -->
<header class="landing-header ">
  <div class="container-fluid p-0">
    <div class="row align-items-center m-0">
      <div class="col-12 p-0">
        <nav class="navbar navbar-expand-lg navbar-light p-0" style="height: auto;">
          <div class="container-fluid px-3 py-2">
            <a class="navbar-brand" href="#">
              <img src="{% static 'images/carify-logo.png' %}" alt="Logo">
            </a>

            <div style="flex-grow: 1; position: relative; height: 100%;">
              <div style="position: absolute; top: 0; left: 0; width: 101%; height: 100%; background-color: #F04C5C; transform: skewX(-0.06turn); transform-origin: bottom left; z-index: 0;"></div>

              <div class="d-flex justify-content-between align-items-center w-100 px-3" style="position: relative; z-index: 1;">
                <h2 class="m-0 text-white text-center flex-grow-1">Admin Dashboard</h2>
                <a class="btn btn-outline-light ms-3" href="{% url 'logout' %}">Log Out</a>
              </div>
            </div>
          </div>
        </nav>
      </div>
    </div>
  </div>
</header>
    
<div class="page-body-wrapper"> 

    <!-- Dashboard Cards -->
  <div class="container-fluid default-dashboard">
   <div class="row">
    <div class="row g-3">
      {% for card in dashboard_cards %}
      <div class="col-lg-3 col-md-6 col-sm-6 col-12">
        <div class="card welcome-banner h-100">
          <div class="card-body pt-3 summary-card text-center">
            <div class="summary-progressbar">
              <div class="d-flex align-items-center justify-content-between mb-3">
                <i class="fa-solid {{ card.icon }} fa-lg" style="color: #F04C5C;"></i>
                <h6 class="mb-1 text-start">{{ card.label }}</h6>
                <h6 class="fw-bold text-dark mb-0">{{ card.value }}</h6>
              </div>
              <div class="progress-showcase">
                <div class="progress sm-progress-bar" style="height: 8px;">
                  <div class="progress-bar bg-danger" role="progressbar" style="width: {{ card.width }}%;" aria-valuenow="{{ card.width }}" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- Manage Vehicles Section -->
    <div class="card job-card mt-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h4 class="mb-0">Manage Vehicles</h4>
        <a href="{% url 'unified_form' %}" class="btn btn-sm btn-warning">Vehicle DPI Form</a>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-striped table-bordered">
            <thead class="thead-light">
              <tr>
                <th>Customer Name</th>
                <th>Vehicle Name</th>
                <th>Health Score</th>
                <th>Inspection Date</th>
                <th class="text-center">Action</th>
              </tr>
            </thead>
            <tbody>
              {% for vehicle in vehicles %}
              <tr>
                <td>{{ vehicle.customer.name }}</td>
                <td>{{ vehicle.maker }} {{ vehicle.model }}</td>
                <td>{{ vehicle.health_score }}</td>
                <td>{{ vehicle.inspection_date }}</td>
                <td class="text-center">
                  <div class="d-flex justify-content-center gap-2">
                    <a href="{% url 'print_vehicle_report' vehicle.id %}" target="_blank" class="btn btn-primary btn-sm" title="View Report">
                      <i class="fa fa-eye"></i>
                    </a>
                    <a href="{% url 'print_vehicle_report' vehicle.id %}" target="_blank" class="btn btn-success btn-sm" title="Print Report">
                      <i class="bx bx-printer"></i>
                    </a>
                    <a href="{% url 'delete_vehicle' vehicle.id %}" class="btn btn-danger btn-sm" title="Delete Report" onclick="return confirm('Are you sure you want to delete this vehicle?');">
                      <i class="bx bx-trash"></i>
                    </a>
                  </div>
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="5" class="text-center">No vehicles found.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
</div>


  <!-- JS Files -->
  <script src="{% static 'assests/js/vendors/jquery/jquery.min.js' %}"></script>
  <script src="{% static 'assests/js/vendors/bootstrap/dist/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'assests/js/font-awesome/fontawesome-min.js' %}"></script>
  <script src="{% static 'assests/js/tooltip-init.js' %}"></script>
  <script src="{% static 'assests/js/animation/wow/wow.min.js' %}"></script>
  <script src="{% static 'assests/js/landing/landing.js' %}"></script>
  <script src="{% static 'assests/js/slick/slick.min.js' %}"></script>
  <script src="{% static 'assests/js/slick/slick.js' %}"></script>
  <script src="{% static 'js/admin.js' %}"></script>
</body>
</html>
